---
description: >-
  Detta kapitel beskriver applikationens centrala komponenter och hur dessa
  tillsammans utgör systemets funktionalitet. Fokus ligger på de viktigaste
  byggstenarna i backend och frontend samt hur dessa s
---

# 4. Applikationens komponenter

### 4.1 Datamodeller

Applikationens datamodell är utformad för att stödja systemets affärslogik, spårbarhet och säkerhet. Följande modeller utgör kärnan i systemet:

#### User

User-modellen representerar alla användare i systemet, oavsett roll. Varje användare har:

* unikt e-postkonto
* lösenord som lagras som BCrypt-hash
* en roll (BRF, Mäklare eller Admin)
* status för om kontot är aktivt

Genom att samla alla användare i en gemensam modell förenklas autentisering och rollhantering.

***

#### Brf

Brf-modellen representerar bostadsrättsföreningar och innehåller grundläggande föreningsinformation såsom namn, adress och kontaktuppgifter. Den används som referenspunkt för formulär, avvikelser och mäklarförfrågningar.

En BRF kan ha flera kopplade formulär över tid, vilket möjliggör historik och jämförelser.

***

#### FormSubmission

FormSubmission representerar ett inskickat formulär från en BRF. Modellen används för att:

* lagra inrapporterad föreningsinformation
* koppla formulär till rätt BRF
* fungera som underlag för köp och avvikelsehantering

Varje formulär sparas separat, vilket gör det möjligt att spåra förändringar över tid.

***

#### Purchase

Purchase-modellen används för att hantera köp av information från mäklare. Den innehåller bland annat:

* vilken mäklare som genomfört köpet
* vilket formulär köpet avser
* belopp
* datum
* betalningsstatus
* transaktions-ID

Modellen möjliggör spårbarhet och utgör grund för framtida betalningslösningar.

***

#### BrfAvvikelse

BrfAvvikelse används för att logga skillnader mellan grunddata och information som rapporterats via formulär. Varje avvikelse kopplas till:

* en BRF
* ett specifikt formulär
* ett enskilt fält

Denna modell är central för systemets kvalitetssäkring och administrativa granskning.

***

### 4.2 Controllers och API-endpoints

Backend är uppdelad i flera controllers med tydliga ansvarsområden. Varje controller exponerar REST-baserade endpoints som används av frontend.

Exempel på controllers i systemet:

* AuthController – registrering och inloggning
* BrfController – hantering av BRF-data
* FormSubmissionController – hantering av formulär
* PurchaseController – köpflöde
* AdminController – administrativ funktionalitet

Denna uppdelning bidrar till tydlighet, testbarhet och god struktur i backend-koden.

***

### 4.3 DTO:er och datakontrakt

För kommunikation mellan frontend och backend används Data Transfer Objects (DTO:er). Dessa fungerar som ett kontrakt mellan systemen och säkerställer att endast nödvändig data exponeras.

DTO:er används bland annat för:

* registrering och inloggning
* formulärinmatning
* presentation av data i frontend
* överföring av köpinformation

Användningen av DTO:er bidrar till bättre säkerhet och minskar kopplingarna mellan frontend och datamodeller.

***

### 4.4 Frontend-komponenter

Frontend består av Razor-komponenter som representerar olika vyer och funktioner i systemet. Exempel på centrala komponenter är:

* registrerings- och inloggningssidor
* formulärvyer för BRF
* sök- och köpvyer för mäklare
* administrativa vyer för granskning och hantering

Varje komponent ansvarar för presentation och användarinteraktion, medan all affärslogik sker i backend.

***

### 4.5 Admin Dashboard

Administratörens dashboard är utformad för att ge översikt och kontroll över systemets innehåll. Här kan administratören:

* se inkomna formulär
* granska avvikelser
* fatta beslut om datakvalitet
* säkerställa att informationen i systemet är korrekt och uppdaterad

Admin Dashboard är inte tillgänglig för andra roller och nås endast efter korrekt autentisering och rollkontroll.

***

### 4.6 Samverkan mellan komponenter

Applikationens komponenter är utformade för att samverka utan onödiga beroenden. Frontend kommunicerar enbart med backend via definierade endpoints, och backend ansvarar för all logik och datalagring.

Denna tydliga separation gör systemet mer robust och lättare att vidareutveckla.
