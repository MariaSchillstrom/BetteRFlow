# 6. Flöden

#### 6.1 Registreringsflöde



<div align="left"><figure><img src="../.gitbook/assets/image (10).png" alt="" width="375"><figcaption></figcaption></figure></div>



**Steg:**

1. Användaren fyller i registreringsformulär (email, användarnamn, lösenord, roll)
2. Frontend skickar POST-request till backend
3. Backend validerar input (email-format, lösenordslängd, etc.)
4. Backend kollar om användare redan finns i databasen
5. Databas bekräftar att användare inte finns
6. Backend hashar lösenord med BCrypt
7. Backend sparar ny användare i databas
8. Databas bekräftar att användare skapades
9. Backend returnerar UserDto (utan lösenord)
10. Frontend navigerar användaren till login-sidan

#### 6.2 Loginflöde



<div align="left"><figure><img src="../.gitbook/assets/image (11).png" alt="" width="375"><figcaption></figcaption></figure></div>



**Steg:**

1. Användaren fyller i email och lösenord
2. Frontend skickar POST-request till backend
3. Backend söker efter användare i databas baserat på email
4. Databas returnerar användare (om hittad)
5. Backend verifierar lösenord med BCrypt
6. Om lösenord stämmer - uppdatera LastLogin i databas
7. Backend returnerar UserDto
8. Frontend sparar användardata
9. Frontend navigerar användaren baserat på roll:
   * BRF-medlem → Formulärsida
   * Mäklare → Söksida (planerat)
